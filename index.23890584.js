var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequire6065;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequire6065=n);var r=n("5LpPB"),s=n("aYw2e"),i=n("FQah5");var o=class{createForm(){const e=(0,i._createElement)("form",{className:"form page__form"});let t,a,n;"ru"===localStorage.getItem("lang")?(t=this._createField("text","Введите ваше имя"),a=this._createField("email","Введите ваш Email"),n="Отправить"):(t=this._createField("text","Type your Name"),a=this._createField("email","Type your Email"),n="Send Message");const r=`\n    <button type="submit" class="page__button">\n      ${n}\n      <i class="icon-plus"></i>\n    </button>\n    `;return e.insertAdjacentHTML("afterbegin",t),e.insertAdjacentHTML("beforeend",a),e.insertAdjacentHTML("beforeend",r),e.onsubmit=this.onSubmitForm,e}onSubmitForm(e){let t={};t="ru"===localStorage.getItem("lang")?{loading:"загрузка...",success:"Сообщение успешно отправлено",error:"Упс! Что-то пошло не так"}:{loading:"loading...",success:"Thx! Success",error:"Oops! Error"};let a=(0,i._createElement)("div",{className:"form__message message"});this.appendChild(a),e.preventDefault(),(async(e,a)=>{document.querySelector(".form__message").classList.add("info"),document.querySelector(".form__message").textContent=t.loading;let n=await fetch(e,{method:"POST",body:new FormData(a)});return await n.text()})("/server.php",this).then((e=>{document.querySelector(".form__message").classList.add("success"),document.querySelector(".form__message").textContent=t.success})).catch((e=>{document.querySelector(".form__message").classList.add("error"),document.querySelector(".form__message").textContent=t.error})).finally((()=>{setTimeout((()=>{document.querySelector(".form__message").remove(),document.querySelectorAll(".form__input").forEach((e=>e.value=""))}),5e3)}))}_createField(e,t,a="",n="form__input"){return`\n    <label class="form__item">\n      <input\n        type="${e}"\n        name="${e}"\n        class="${n}"\n        placeholder="${t}"\n      />\n      ${a}\n    </label>\n    `}};i=n("FQah5");var c=class{constructor({pages:e,pageContainForm:t,selectorPrev:a,selectorNext:n,selectorNav:r}){this.pages=e,this.pageContainForm=t,this.lengthPages=this.pages.length-1,this.createNavigation(this.pages,this.currentPageIndex),this.init(a,n,r)}createNavigation(e){(0,i.render)(e,".nav",(e=>`\n    <li class="nav__item">\n      <a href="${e.link}" class="nav__link ${e.id===this.currentPageIndex?"nav__link_active":""}">\n        ${e.name}\n      </a>\n    </li>\n    `))}init(e,t,a){this.prevNav=document.querySelector(e),this.nextNav=document.querySelector(t),this.navLinks=document.querySelectorAll(a),this.creatorForm=new o,this.prevHistoryState={},history.pushState({link:window.location.pathname},"",window.location.pathname);const{id:n,...r}=this._getCurrentPage();this.currentPageIndex=n,this.insertPage(r,n),this.navLinks.forEach((e=>{e.addEventListener("click",this.changeLinkPage.bind(this))})),this.prevNav.addEventListener("click",this.prevPage.bind(this)),this.nextNav.addEventListener("click",this.nextPage.bind(this)),window.onpopstate=()=>{const{id:e,...t}=this._getCurrentPage();this.insertPage(t,e)}}insertPage(e,t){const a=document.querySelector(".page__update"),n=this.createPage(e,t);this.navLinks.forEach((e=>{e.classList.remove("nav__link_active")})),s.default.remove([".page__text",".page__content"]),s.default.timeline({easing:"easeOutExpo"}).add({targets:".page__text",opacity:[1,0],translateY:[0,100],duration:350}).add({targets:".page__content",opacity:[1,0],translateY:[0,-100],duration:350,complete:()=>{document.querySelector(".page").remove(),this.insertControlName(e.name,t)}}),setTimeout((()=>{a.appendChild(n),this.navLinks[t].classList.add("nav__link_active"),s.default.timeline({easing:"easeOutExpo"}).add({targets:".page__text",opacity:[0,1],translateY:[100,0],offset:"-=1500"}).add({targets:".page__content",opacity:[0,1],translateY:[-100,0],offset:"-=1500"})}),700)}createPage(e,t){const a=(0,i._createElement)("div",{className:"page",role:"banner"}),n=(0,i._createElement)("section",{className:"page__text"}),r=`\n    <h1 class="page__title">${e.title}</h1>\n    <p class="page__desc">${e.content}</p>\n    `;n.insertAdjacentHTML("afterbegin",r);let s="";e.buttonLink&&e.buttonText&&(s=`\n      <a href="${e.buttonLink}" target="_blank" class="page__button">\n        ${e.buttonText}\n        <i class="icon-plus"></i>\n      </a>\n      `,n.insertAdjacentHTML("beforeend",s)),this.pageContainForm===t&&(s=this.creatorForm.createForm(),n.insertAdjacentElement("beforeend",s));const o=`\n    <section class="page__content">\n    <img src="${e.imageUrl}" alt="${e.title}" />\n    </section>\n    `;return a.insertAdjacentElement("afterbegin",n),a.insertAdjacentHTML("beforeend",o),a}insertControlName(e,t){const a=document.querySelector(".view__name"),n=document.querySelector(".view__count h2"),r=document.querySelector(".view__loader-line");a.innerText=e,n.innerText=`0${t+1}`,r.style.width=100/this.lengthPages*parseInt(t)+"%"}changeLinkPage(e){e.preventDefault(),this.prevHistoryState=this._getPrevHistoryState(this.currentPageIndex),history.pushState({link:e.target.getAttribute("href"),...this.prevHistoryState},"",e.target.getAttribute("href"));const{id:t,...a}=this._getCurrentPage();this.currentPageIndex=t,this.insertPage(a,t)}prevPage(){this.currentPageIndex>0?(this.prevHistoryState=this._getPrevHistoryState(this.currentPageIndex),this.currentPageIndex--,this._historyPushState(this.currentPageIndex,this.prevHistoryState),this.insertPage(this._getCurrentPage(),this.currentPageIndex)):(this.prevHistoryState=this._getPrevHistoryState(this.currentPageIndex),this.currentPageIndex=this.lengthPages,this._historyPushState(this.currentPageIndex,this.prevHistoryState),this.insertPage(this._getCurrentPage(),this.currentPageIndex))}nextPage(){this.currentPageIndex<this.lengthPages?(this.prevHistoryState=this._getPrevHistoryState(this.currentPageIndex),this.currentPageIndex++,this._historyPushState(this.currentPageIndex,this.prevHistoryState),this.insertPage(this._getCurrentPage(),this.currentPageIndex)):(this.prevHistoryState=this._getPrevHistoryState(this.currentPageIndex),this.currentPageIndex=0,this._historyPushState(this.currentPageIndex,this.prevHistoryState),this.insertPage(this._getCurrentPage(),this.currentPageIndex))}_getPrevHistoryState(e){let{link:t}=this.pages.find((({id:t})=>t===e));return{prevId:e,prevLink:t}}_historyPushState(e,t){history.pushState({link:this.pages[e].link,...t},"",this.pages[e].link)}_getCurrentPage(){let e=history.state.link;return this.pages.find((({link:t})=>t===e))}};s=n("aYw2e"),s=n("aYw2e");new c({pages:n("kquTl").pages,pageContainForm:3,selectorPrev:".view__arrow.prev",selectorNext:".view__arrow.next",selectorNav:".nav__link"}),(0,r.default)(),s.default.timeline({easing:"easeOutExpo"}).add({targets:".view__name",height:["0rem","3.6rem"],opacity:[0,1],offset:"-=900"}).add({targets:".view__count",height:["0rem","5rem"],opacity:[0,1],offset:"-=800"}).add({targets:".social a",translateX:[500,0],opacity:[0,1],delay:(e,t)=>200*t,offset:"-=1000"}).add({targets:".view__arrow",translateY:[500,0],opacity:[0,1],delay:(e,t)=>200*t,offset:"-=1000"}),(e=>{function t(e){s.default.remove(e),(0,s.default)({targets:e,scale:1.1,translateX:-5,translateY:-5,easing:"easeOutExpo"})}function a(e){s.default.remove(e),(0,s.default)({targets:e,scale:1,translateX:0,translateY:0,easing:"easeOutExpo"})}document.querySelectorAll(e).forEach((e=>{e.addEventListener("mouseenter",(()=>t(e))),e.addEventListener("mouseleave",(()=>a(e))),e.addEventListener("focus",(()=>t(e))),e.addEventListener("blur",(()=>a(e)))}))})(".view__arrow");